import{S as fe,i as ce,s as de,y as F,a as j,k as P,q,z,c as M,l as T,m as R,h,r as B,n as S,p as ue,A as V,b as w,J as be,G as y,K as oe,L as Pe,g as v,d as $,B as L,M as xe,I as Q,N as et,v as W,f as X,H as we,C as _e,O as x,D as me,E as pe,F as he,e as Se,u as re,P as ct,Q as dt,R as ye,T as tt,U as it,V as nt,W as $e,o as _t,w as Z,X as ee,Y as te,Z as Ee}from"../chunks/index.2ecf17a4.js";import{m as mt,a as pt,b as ht,c as gt,d as vt,e as bt,f as $t,g as kt,h as It,i as St,j as Et,k as wt}from"../chunks/mdi.5769e54d.js";import{s as K,f as ie}from"../chunks/settingStore.5e552471.js";import{U as Ae}from"../chunks/computeShader3d.ebc538df.js";import{B as H,I as yt}from"../chunks/Button.14bf8c2c.js";import{g as le,i as ke,a as Ie,H as Ct,h as At}from"../chunks/gpuStore.3315e7be.js";import{I as ae}from"../chunks/Input.f5150092.js";import{w as ve}from"../chunks/index.0449cfc6.js";const Pt=({route:n})=>({path:n.id.split("/").at(-1)}),Hi=Object.freeze(Object.defineProperty({__proto__:null,load:Pt},Symbol.toStringTag,{value:"Module"}));function Tt(n){let e,i,t,l,r,s,o,a,f,d,u,_,c,p,g,C,O,D,A,U,G,k,b;return e=new H({props:{icon:mt,tooltip:"Reset to step 0"}}),e.$on("click",n[7]),t=new H({props:{disabled:!n[3]||n[4].loading,icon:pt,tooltip:"Step by "+n[0]}}),t.$on("click",n[8]),D=new H({props:{disabled:!0,icon:ht,tooltip:"Copy url to this state"}}),U=new H({props:{icon:gt,tooltip:"Export to database"}}),U.$on("click",n[6]),{c(){F(e.$$.fragment),i=j(),F(t.$$.fragment),l=j(),r=P("input"),s=j(),o=P("div"),a=j(),f=P("div"),d=P("div"),u=q("z ="),_=j(),c=P("input"),g=j(),C=P("div"),O=j(),F(D.$$.fragment),A=j(),F(U.$$.fragment),this.h()},l(m){z(e.$$.fragment,m),i=M(m),z(t.$$.fragment,m),l=M(m),r=T(m,"INPUT",{type:!0,class:!0}),s=M(m),o=T(m,"DIV",{class:!0}),R(o).forEach(h),a=M(m),f=T(m,"DIV",{class:!0});var E=R(f);d=T(E,"DIV",{class:!0});var N=R(d);u=B(N,"z ="),N.forEach(h),_=M(E),c=T(E,"INPUT",{min:!0,max:!0,type:!0,class:!0,style:!0}),E.forEach(h),g=M(m),C=T(m,"DIV",{class:!0}),R(C).forEach(h),O=M(m),z(D.$$.fragment,m),A=M(m),z(U.$$.fragment,m),this.h()},h(){S(r,"type","number"),S(r,"class","bg-transparent outline-none rounded text-center hover:bg-gray-200/20 active:bg-gray-200/20 w-16"),S(o,"class","w-0.5 h-8 bg-white/40 rounded-full"),S(d,"class","whitespace-nowrap"),S(c,"min","0"),S(c,"max",p="hyperparameters"in n[2]?n[2].hyperparameters.size-1:1),S(c,"type","range"),S(c,"class","block"),ue(c,"accent-color","white"),S(f,"class","flex items-center mx-2 gap-1"),S(C,"class","h-full w-0.5 bg-white/40 rounded-full")},m(m,E){V(e,m,E),w(m,i,E),V(t,m,E),w(m,l,E),w(m,r,E),be(r,n[0]),w(m,s,E),w(m,o,E),w(m,a,E),w(m,f,E),y(f,d),y(d,u),y(f,_),y(f,c),be(c,n[1]),w(m,g,E),w(m,C,E),w(m,O,E),V(D,m,E),w(m,A,E),V(U,m,E),G=!0,k||(b=[oe(r,"input",n[9]),oe(c,"change",n[10]),oe(c,"input",n[10])],k=!0)},p(m,[E]){const N={};E&24&&(N.disabled=!m[3]||m[4].loading),E&1&&(N.tooltip="Step by "+m[0]),t.$set(N),E&1&&Pe(r.value)!==m[0]&&be(r,m[0]),(!G||E&4&&p!==(p="hyperparameters"in m[2]?m[2].hyperparameters.size-1:1))&&S(c,"max",p),E&2&&be(c,m[1])},i(m){G||(v(e.$$.fragment,m),v(t.$$.fragment,m),v(D.$$.fragment,m),v(U.$$.fragment,m),G=!0)},o(m){$(e.$$.fragment,m),$(t.$$.fragment,m),$(D.$$.fragment,m),$(U.$$.fragment,m),G=!1},d(m){L(e,m),m&&h(i),L(t,m),m&&h(l),m&&h(r),m&&h(s),m&&h(o),m&&h(a),m&&h(f),m&&h(g),m&&h(C),m&&h(O),L(D,m),m&&h(A),L(U,m),k=!1,xe(b)}}}function Rt(n,e,i){let t,l,r;Q(n,le,p=>i(2,l=p)),Q(n,ke,p=>i(4,r=p));let{iterateStep:s=1e3}=e,{sliceIndex:o=0}=e;const a=et();function f(){ke.set("Uploading result to database"),setTimeout(()=>{ke.reset()},1e3)}const d=()=>a("reset"),u=()=>a("iterate");function _(){s=Pe(this.value),i(0,s)}function c(){o=Pe(this.value),i(1,o)}return n.$$set=p=>{"iterateStep"in p&&i(0,s=p.iterateStep),"sliceIndex"in p&&i(1,o=p.sliceIndex)},n.$$.update=()=>{n.$$.dirty&4&&i(3,t=Ie(l))},[s,o,l,t,r,a,f,d,u,_,c]}class Dt extends fe{constructor(e){super(),ce(this,e,Rt,Tt,de,{iterateStep:0,sliceIndex:1})}}function Nt(n){let e,i;return e=new H({props:{selected:!0,icon:vt}}),e.$on("click",n[2]),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p:we,i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function jt(n){let e,i;return e=new H({props:{selected:!0,icon:bt}}),e.$on("click",n[1]),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p:we,i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function Mt(n){let e,i,t,l,r,s,o;const a=[jt,Nt],f=[];function d(u,_){return u[0].darkMode=="dark"?0:1}return r=d(n),s=f[r]=a[r](n),{c(){e=P("div"),i=P("p"),t=q("Toggle dark:"),l=j(),s.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var _=R(e);i=T(_,"P",{class:!0});var c=R(i);t=B(c,"Toggle dark:"),c.forEach(h),l=M(_),s.l(_),_.forEach(h),this.h()},h(){S(i,"class","inline-block mr-4 whitespace-nowrap"),S(e,"class","flex items-center")},m(u,_){w(u,e,_),y(e,i),y(i,t),y(e,l),f[r].m(e,null),o=!0},p(u,[_]){let c=r;r=d(u),r===c?f[r].p(u,_):(W(),$(f[c],1,1,()=>{f[c]=null}),X(),s=f[r],s?s.p(u,_):(s=f[r]=a[r](u),s.c()),v(s,1),s.m(e,null))},i(u){o||(v(s),o=!0)},o(u){$(s),o=!1},d(u){u&&h(e),f[r].d()}}}function Ot(n,e,i){let t;return Q(n,K,s=>i(0,t=s)),[t,()=>K.set("darkMode","light"),()=>K.set("darkMode","dark")]}class Ft extends fe{constructor(e){super(),ce(this,e,Ot,Mt,de,{})}}function De(n){let e,i;return e=new yt({props:{path:n[0],size:1.3}}),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p(t,l){const r={};l&1&&(r.path=t[0]),e.$set(r)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function zt(n){let e,i,t=n[0]&&De(n);return{c(){t&&t.c(),e=Se()},l(l){t&&t.l(l),e=Se()},m(l,r){t&&t.m(l,r),w(l,e,r),i=!0},p(l,r){l[0]?t?(t.p(l,r),r&1&&v(t,1)):(t=De(l),t.c(),v(t,1),t.m(e.parentNode,e)):t&&(W(),$(t,1,1,()=>{t=null}),X())},i(l){i||(v(t),i=!0)},o(l){$(t),i=!1},d(l){t&&t.d(l),l&&h(e)}}}function Ne(n){let e,i;return{c(){e=P("div"),i=q(n[1]),this.h()},l(t){e=T(t,"DIV",{class:!0});var l=R(e);i=B(l,n[1]),l.forEach(h),this.h()},h(){S(e,"class","tooltip opacity-0 absolute left-full top-1/2 transform -translate-y-1/2 ml-1 bg-gray-400/80 p-2 whitespace-nowrap transition-all rounded-xl text-xs text-white/90 svelte-wolhas")},m(t,l){w(t,e,l),y(e,i)},p(t,l){l&2&&re(i,t[1])},d(t){t&&h(e)}}}function Vt(n){let e,i,t,l,r;const s=n[5].default,o=_e(s,n,n[4],null),a=o||zt(n);let f=n[1]&&Ne(n);return{c(){e=P("a"),a&&a.c(),i=j(),f&&f.c(),this.h()},l(d){e=T(d,"A",{class:!0,href:!0});var u=R(e);a&&a.l(u),i=M(u),f&&f.l(u),u.forEach(h),this.h()},h(){S(e,"class","p-3 disabled:opacity-70 hover:bg-gray-200/40 hover:scale-105 transition-all rounded-full relative svelte-wolhas"),S(e,"href",n[2]),x(e,"selected",n[3])},m(d,u){w(d,e,u),a&&a.m(e,null),y(e,i),f&&f.m(e,null),t=!0,l||(r=oe(e,"click",n[6]),l=!0)},p(d,[u]){o?o.p&&(!t||u&16)&&me(o,s,d,d[4],t?he(s,d[4],u,null):pe(d[4]),null):a&&a.p&&(!t||u&1)&&a.p(d,t?u:-1),d[1]?f?f.p(d,u):(f=Ne(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!t||u&4)&&S(e,"href",d[2]),(!t||u&8)&&x(e,"selected",d[3])},i(d){t||(v(a,d),t=!0)},o(d){$(a,d),t=!1},d(d){d&&h(e),a&&a.d(d),f&&f.d(),l=!1,r()}}}function Lt(n,e,i){let{$$slots:t={},$$scope:l}=e,{icon:r=""}=e,{tooltip:s=""}=e,{href:o=""}=e,{selected:a=!1}=e;function f(d){ct.call(this,n,d)}return n.$$set=d=>{"icon"in d&&i(0,r=d.icon),"tooltip"in d&&i(1,s=d.tooltip),"href"in d&&i(2,o=d.href),"selected"in d&&i(3,a=d.selected),"$$scope"in d&&i(4,l=d.$$scope)},[r,s,o,a,l,t,f]}class lt extends fe{constructor(e){super(),ce(this,e,Lt,Vt,de,{icon:0,tooltip:1,href:2,selected:3})}}const Ut=n=>({}),je=n=>({}),qt=n=>({selectedTab:n&4}),Me=n=>({selectedTab:n[2]});function Oe(n,e,i){const t=n.slice();return t[15]=e[i],t}const Bt=n=>({}),Fe=n=>({});function ze(n){let e,i,t,l;const r=[Ht,Gt],s=[];function o(a,f){return a[3]?1:0}return i=o(n),t=s[i]=r[i](n),{c(){e=P("div"),t.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var f=R(e);t.l(f),f.forEach(h),this.h()},h(){S(e,"class","z-[100] bottom-8 absolute w-full transform ornamentContainer svelte-i37ajv")},m(a,f){w(a,e,f),s[i].m(e,null),l=!0},p(a,f){let d=i;i=o(a),i===d?s[i].p(a,f):(W(),$(s[d],1,1,()=>{s[d]=null}),X(),t=s[i],t?t.p(a,f):(t=s[i]=r[i](a),t.c()),v(t,1),t.m(e,null))},i(a){l||(v(t),l=!0)},o(a){$(t),l=!1},d(a){a&&h(e),s[i].d()}}}function Gt(n){let e,i,t,l,r,s,o,a,f,d,u,_,c,p,g,C,O;t=new H({props:{selected:!0,icon:$t}}),t.$on("click",n[9]);let D=n[5],A=[];for(let b=0;b<D.length;b+=1)A[b]=Ve(Oe(n,D,b));const U=b=>$(A[b],1,1,()=>{A[b]=null});a=new H({props:{selected:!0,$$slots:{default:[Xt]},$$scope:{ctx:n}}}),a.$on("click",n[11]);const G=n[7].ornamentExpand,k=_e(G,n,n[14],Me);return{c(){e=P("div"),i=P("div"),F(t.$$.fragment),l=j(),r=P("div");for(let b=0;b<A.length;b+=1)A[b].c();s=j(),o=P("div"),F(a.$$.fragment),f=j(),d=P("form"),k&&k.c(),u=j(),_=P("input"),this.h()},l(b){e=T(b,"DIV",{style:!0,class:!0});var m=R(e);i=T(m,"DIV",{class:!0});var E=R(i);z(t.$$.fragment,E),E.forEach(h),l=M(m),r=T(m,"DIV",{class:!0});var N=R(r);for(let ge=0;ge<A.length;ge+=1)A[ge].l(N);N.forEach(h),s=M(m),o=T(m,"DIV",{class:!0});var Y=R(o);z(a.$$.fragment,Y),Y.forEach(h),f=M(m),d=T(m,"FORM",{});var se=R(d);k&&k.l(se),u=M(se),_=T(se,"INPUT",{class:!0,type:!0}),se.forEach(h),m.forEach(h),this.h()},h(){S(i,"class","absolute left-4 top-4"),S(r,"class","flex gap-2 justify-center mb-3"),S(o,"class","absolute right-4 top-4"),S(_,"class","hidden"),S(_,"type","submit"),ue(e,"border-radius","2.5rem"),ue(e,"min-width","45rem"),S(e,"class","ornament p-8 pt-4 bg-gray-700/40 hover:bg-gray-700/50 -mt-4 backdrop-blur-lg relative svelte-i37ajv")},m(b,m){w(b,e,m),y(e,i),V(t,i,null),y(e,l),y(e,r);for(let E=0;E<A.length;E+=1)A[E]&&A[E].m(r,null);y(e,s),y(e,o),V(a,o,null),y(e,f),y(e,d),k&&k.m(d,null),y(d,u),y(d,_),g=!0,C||(O=[oe(_,"submit",n[12]),oe(d,"submit",n[13])],C=!0)},p(b,m){if(m&36){D=b[5];let N;for(N=0;N<D.length;N+=1){const Y=Oe(b,D,N);A[N]?(A[N].p(Y,m),v(A[N],1)):(A[N]=Ve(Y),A[N].c(),v(A[N],1),A[N].m(r,null))}for(W(),N=D.length;N<A.length;N+=1)U(N);X()}const E={};m&16384&&(E.$$scope={dirty:m,ctx:b}),a.$set(E),k&&k.p&&(!g||m&16388)&&me(k,G,b,b[14],g?he(G,b[14],m,qt):pe(b[14]),Me)},i(b){if(!g){v(t.$$.fragment,b);for(let m=0;m<D.length;m+=1)v(A[m]);v(a.$$.fragment,b),v(k,b),ye(()=>{g&&(p&&p.end(1),c=tt(e,ie,{y:-20,duration:750}),c.start())}),g=!0}},o(b){$(t.$$.fragment,b),A=A.filter(Boolean);for(let m=0;m<A.length;m+=1)$(A[m]);$(a.$$.fragment,b),$(k,b),c&&c.invalidate(),p=it(e,ie,{y:20,duration:500}),g=!1},d(b){b&&h(e),L(t),nt(A,b),L(a),k&&k.d(b),b&&p&&p.end(),C=!1,xe(O)}}}function Ht(n){let e,i,t,l,r;const s=n[7].ornament,o=_e(s,n,n[14],Fe);let a=n[6].ornamentExpand&&Le(n);return{c(){e=P("div"),o&&o.c(),i=j(),a&&a.c(),this.h()},l(f){e=T(f,"DIV",{class:!0});var d=R(e);o&&o.l(d),i=M(d),a&&a.l(d),d.forEach(h),this.h()},h(){S(e,"class","ornament w-fit bg-gray-700/40 hover:bg-gray-700/50 backdrop-blur-lg rounded-full p-3 flex items-center gap-2 svelte-i37ajv")},m(f,d){w(f,e,d),o&&o.m(e,null),y(e,i),a&&a.m(e,null),r=!0},p(f,d){o&&o.p&&(!r||d&16384)&&me(o,s,f,f[14],r?he(s,f[14],d,Bt):pe(f[14]),Fe),f[6].ornamentExpand?a?(a.p(f,d),d&64&&v(a,1)):(a=Le(f),a.c(),v(a,1),a.m(e,null)):a&&(W(),$(a,1,1,()=>{a=null}),X())},i(f){r||(v(o,f),v(a),ye(()=>{r&&(l&&l.end(1),t=tt(e,ie,{y:20,duration:1e3}),t.start())}),r=!0)},o(f){$(o,f),$(a),t&&t.invalidate(),l=it(e,ie,{y:-20,duration:500}),r=!1},d(f){f&&h(e),o&&o.d(f),a&&a.d(),f&&l&&l.end()}}}function Wt(n){let e=n[15]+"",i,t;return{c(){i=q(e),t=j()},l(l){i=B(l,e),t=M(l)},m(l,r){w(l,i,r),w(l,t,r)},p:we,d(l){l&&h(i),l&&h(t)}}}function Ve(n){let e,i;function t(){return n[10](n[15])}return e=new lt({props:{selected:n[15]===n[2],$$slots:{default:[Wt]},$$scope:{ctx:n}}}),e.$on("click",t),{c(){F(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,r){V(e,l,r),i=!0},p(l,r){n=l;const s={};r&4&&(s.selected=n[15]===n[2]),r&16384&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(l){i||(v(e.$$.fragment,l),i=!0)},o(l){$(e.$$.fragment,l),i=!1},d(l){L(e,l)}}}function Xt(n){let e;return{c(){e=q("Save settings")},l(i){e=B(i,"Save settings")},m(i,t){w(i,e,t)},d(i){i&&h(e)}}}function Le(n){let e,i,t,l;return t=new H({props:{icon:kt,tooltip:"Show more options"}}),t.$on("click",n[8]),{c(){e=P("div"),i=j(),F(t.$$.fragment),this.h()},l(r){e=T(r,"DIV",{class:!0}),R(e).forEach(h),i=M(r),z(t.$$.fragment,r),this.h()},h(){S(e,"class","h-8 w-0.5 bg-white/40 rounded-full")},m(r,s){w(r,e,s),w(r,i,s),V(t,r,s),l=!0},p:we,i(r){l||(v(t.$$.fragment,r),l=!0)},o(r){$(t.$$.fragment,r),l=!1},d(r){r&&h(e),r&&h(i),L(t,r)}}}function Ue(n){let e,i,t;const l=n[7].tabGroup,r=_e(l,n,n[14],je);return{c(){e=P("div"),i=P("div"),r&&r.c(),this.h()},l(s){e=T(s,"DIV",{class:!0});var o=R(e);i=T(o,"DIV",{class:!0});var a=R(i);r&&r.l(a),a.forEach(h),o.forEach(h),this.h()},h(){S(i,"class","tabGroup bg-gray-600/60 hover:bg-gray-600/70 transition-colors backdrop-blur-lg h-fit rounded-full flex flex-col py-3 px-2 gap-2 svelte-i37ajv"),S(e,"class","-left-12 absolute flex h-full flex-col justify-center")},m(s,o){w(s,e,o),y(e,i),r&&r.m(i,null),t=!0},p(s,o){r&&r.p&&(!t||o&16384)&&me(r,l,s,s[14],t?he(l,s[14],o,Ut):pe(s[14]),je)},i(s){t||(v(r,s),t=!0)},o(s){$(r,s),t=!1},d(s){s&&h(e),r&&r.d(s)}}}function Yt(n){let e,i,t,l,r,s,o,a,f,d,u=n[6].ornament&&ze(n),_=n[6].tabGroup&&Ue(n);const c=n[7].default,p=_e(c,n,n[14],null);return{c(){e=P("div"),i=P("div"),t=P("div"),l=P("h1"),r=q(n[0]),s=j(),u&&u.c(),o=j(),_&&_.c(),a=j(),f=P("div"),p&&p.c(),this.h()},l(g){e=T(g,"DIV",{class:!0,style:!0});var C=R(e);i=T(C,"DIV",{class:!0});var O=R(i);t=T(O,"DIV",{class:!0});var D=R(t);l=T(D,"H1",{class:!0});var A=R(l);r=B(A,n[0]),A.forEach(h),D.forEach(h),s=M(O),u&&u.l(O),o=M(O),_&&_.l(O),a=M(O),f=T(O,"DIV",{class:!0});var U=R(f);p&&p.l(U),U.forEach(h),O.forEach(h),C.forEach(h),this.h()},h(){S(l,"class","text-lg font-bold text-white-200"),S(t,"class","absolute top-0 m-4 rounded-xl p-3 bg-gray-400/50 backdrop-blur-lg"),S(f,"class","rounded-3xl overflow-hidden"),S(i,"class","relative bg-slate-200/80 rounded-3xl"),S(e,"class","pt-12 pb-24 aspect-square absolute transition-transform duration-500 svelte-i37ajv"),ue(e,"max-width","85vmin"),x(e,"side",n[1]=="charts")},m(g,C){w(g,e,C),y(e,i),y(i,t),y(t,l),y(l,r),y(i,s),u&&u.m(i,null),y(i,o),_&&_.m(i,null),y(i,a),y(i,f),p&&p.m(f,null),d=!0},p(g,[C]){(!d||C&1)&&re(r,g[0]),g[6].ornament?u?(u.p(g,C),C&64&&v(u,1)):(u=ze(g),u.c(),v(u,1),u.m(i,o)):u&&(W(),$(u,1,1,()=>{u=null}),X()),g[6].tabGroup?_?(_.p(g,C),C&64&&v(_,1)):(_=Ue(g),_.c(),v(_,1),_.m(i,a)):_&&(W(),$(_,1,1,()=>{_=null}),X()),p&&p.p&&(!d||C&16384)&&me(p,c,g,g[14],d?he(c,g[14],C,null):pe(g[14]),null),(!d||C&2)&&x(e,"side",g[1]=="charts")},i(g){d||(v(u),v(_),v(p,g),d=!0)},o(g){$(u),$(_),$(p,g),d=!1},d(g){g&&h(e),u&&u.d(),_&&_.d(),p&&p.d(g)}}}function Jt(n,e,i){let{$$slots:t={},$$scope:l}=e;const r=dt(t);let{title:s="Window"}=e,{path:o}=e;const a=et();let f=["Parameters","Universe","Settings"],d=f[0],u=!1;const _=()=>i(3,u=!0),c=()=>i(3,u=!1),p=D=>i(2,d=D),g=()=>{i(3,u=!1),a("saveSettings")},C=()=>console.log("submit sucess"),O=()=>{i(3,u=!1),a("saveSettings")};return n.$$set=D=>{"title"in D&&i(0,s=D.title),"path"in D&&i(1,o=D.path),"$$scope"in D&&i(14,l=D.$$scope)},[s,o,d,u,a,f,r,t,_,c,p,g,C,O,l]}class Zt extends fe{constructor(e){super(),ce(this,e,Jt,Yt,de,{title:0,path:1})}}let ne={outputUniverse:ve(),orderParams:ve([]),HYPERPARAMS:ve(),sliceIndex:ve(0),iterateStep:ve(0)};function Kt(n){let e,i;return e=new H({props:{selected:!0,$$slots:{default:[xt]},$$scope:{ctx:n}}}),e.$on("click",n[5]),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p(t,l){const r={};l&65&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function Qt(n){let e,i;return e=new H({props:{selected:!0,$$slots:{default:[ei]},$$scope:{ctx:n}}}),e.$on("click",n[4]),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p(t,l){const r={};l&65&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function xt(n){let e=n[0][1]+"",i;return{c(){i=q(e)},l(t){i=B(t,e)},m(t,l){w(t,i,l)},p(t,l){l&1&&e!==(e=t[0][1]+"")&&re(i,e)},d(t){t&&h(i)}}}function ei(n){let e=n[0][0]+"",i;return{c(){i=q(e)},l(t){i=B(t,e)},m(t,l){w(t,i,l)},p(t,l){l&1&&e!==(e=t[0][0]+"")&&re(i,e)},d(t){t&&h(i)}}}function ti(n){let e,i,t,l,r,s,o,a,f;const d=[Qt,Kt],u=[];function _(c,p){return c[3][c[1]]==c[0][0]?0:1}return o=_(n),a=u[o]=d[o](n),{c(){e=P("div"),i=P("p"),t=q("Toggle "),l=q(n[2]),r=q(":"),s=j(),a.c(),this.h()},l(c){e=T(c,"DIV",{class:!0});var p=R(e);i=T(p,"P",{class:!0});var g=R(i);t=B(g,"Toggle "),l=B(g,n[2]),r=B(g,":"),g.forEach(h),s=M(p),a.l(p),p.forEach(h),this.h()},h(){S(i,"class","inline-block mr-4 whitespace-nowrap"),S(e,"class","flex items-center mb-2")},m(c,p){w(c,e,p),y(e,i),y(i,t),y(i,l),y(i,r),y(e,s),u[o].m(e,null),f=!0},p(c,[p]){(!f||p&4)&&re(l,c[2]);let g=o;o=_(c),o===g?u[o].p(c,p):(W(),$(u[g],1,1,()=>{u[g]=null}),X(),a=u[o],a?a.p(c,p):(a=u[o]=d[o](c),a.c()),v(a,1),a.m(e,null))},i(c){f||(v(a),f=!0)},o(c){$(a),f=!1},d(c){c&&h(e),u[o].d()}}}function ii(n,e,i){let t;Q(n,K,f=>i(3,t=f));let{options:l}=e,{key:r}=e,{title:s}=e;const o=()=>K.set(r,l[1]),a=()=>K.set(r,l[0]);return n.$$set=f=>{"options"in f&&i(0,l=f.options),"key"in f&&i(1,r=f.key),"title"in f&&i(2,s=f.title)},[l,r,s,t,o,a]}class qe extends fe{constructor(e){super(),ce(this,e,ii,ti,de,{options:0,key:1,title:2})}}function Te(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Be(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function Re(n,e,i){return e&&Be(n.prototype,e),i&&Be(n,i),n}function Ge(n){return+n.replace(/px/,"")}function ni(n){var e=window.devicePixelRatio,i=getComputedStyle(n),t=Ge(i.getPropertyValue("width")),l=Ge(i.getPropertyValue("height"));n.setAttribute("width",(t*e).toString()),n.setAttribute("height",(l*e).toString())}function J(n,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=Math.random()*(e-n)+n;return Math.floor(t*Math.pow(10,i))/Math.pow(10,i)}function He(n){return n[J(0,n.length)]}var li=.00125,ri=5e-4,si=9e-4,ai=1e-5,oi=6,ui=80,fi=.9,ci=1.7,di=.2,_i=.6,mi=.03,pi=.07,We=15,Xe=82,hi=150,gi=100,vi=250,bi=40,$i=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function Ye(n){var e=1920;return Math.log(n)/Math.log(e)}var Je=function(){function n(e){Te(this,n);var i=e.initialPosition,t=e.direction,l=e.confettiRadius,r=e.confettiColors,s=e.emojis,o=e.emojiSize,a=e.canvasWidth,f=J(fi,ci,3),d=f*Ye(a);this.confettiSpeed={x:d,y:d},this.finalConfettiSpeedX=J(di,_i,3),this.rotationSpeed=s.length?.01:J(mi,pi,3)*Ye(a),this.dragForceCoefficient=J(ri,si,6),this.radius={x:l,y:l},this.initialRadius=l,this.rotationAngle=t==="left"?J(0,.2,3):J(-.2,0,3),this.emojiSize=o,this.emojiRotationAngle=J(0,2*Math.PI),this.radiusYUpdateDirection="down";var u=t==="left"?J(Xe,We)*Math.PI/180:J(-We,-Xe)*Math.PI/180;this.absCos=Math.abs(Math.cos(u)),this.absSin=Math.abs(Math.sin(u));var _=J(-hi,0),c={x:i.x+(t==="left"?-_:_)*this.absCos,y:i.y-_*this.absSin};this.currentPosition=Object.assign({},c),this.initialPosition=Object.assign({},c),this.color=s.length?null:He(r),this.emoji=s.length?He(s):null,this.createdAt=new Date().getTime(),this.direction=t}return Re(n,[{key:"draw",value:function(i){var t=this.currentPosition,l=this.radius,r=this.color,s=this.emoji,o=this.rotationAngle,a=this.emojiRotationAngle,f=this.emojiSize,d=window.devicePixelRatio;r?(i.fillStyle=r,i.beginPath(),i.ellipse(t.x*d,t.y*d,l.x*d,l.y*d,o,0,2*Math.PI),i.fill()):s&&(i.font="".concat(f,"px serif"),i.save(),i.translate(d*t.x,d*t.y),i.rotate(a),i.textAlign="center",i.fillText(s,0,0),i.restore())}},{key:"updatePosition",value:function(i,t){var l=this.confettiSpeed,r=this.dragForceCoefficient,s=this.finalConfettiSpeedX,o=this.radiusYUpdateDirection,a=this.rotationSpeed,f=this.createdAt,d=this.direction,u=t-f;if(l.x>s&&(this.confettiSpeed.x-=r*i),this.currentPosition.x+=l.x*(d==="left"?-this.absCos:this.absCos)*i,this.currentPosition.y=this.initialPosition.y-l.y*this.absSin*u+li*Math.pow(u,2)/2,this.rotationSpeed-=this.emoji?1e-4:ai*i,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*i%(2*Math.PI);return}o==="down"?(this.radius.y-=i*a,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=i*a,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(i){return this.currentPosition.y<i+gi}}]),n}();function ki(){var n=document.createElement("canvas");return n.style.position="fixed",n.style.width="100%",n.style.height="100%",n.style.top="0",n.style.left="0",n.style.zIndex="1000",n.style.pointerEvents="none",document.body.appendChild(n),n}function Ii(n){var e=n.confettiRadius,i=e===void 0?oi:e,t=n.confettiNumber,l=t===void 0?n.confettiesNumber||(n.emojis?bi:vi):t,r=n.confettiColors,s=r===void 0?$i:r,o=n.emojis,a=o===void 0?n.emojies||[]:o,f=n.emojiSize,d=f===void 0?ui:f;return n.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),n.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:i,confettiNumber:l,confettiColors:s,emojis:a,emojiSize:d}}var Si=function(){function n(e){var i=this;Te(this,n),this.canvasContext=e,this.shapes=[],this.promise=new Promise(function(t){return i.resolvePromise=t})}return Re(n,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var i;(i=this.shapes).push.apply(i,arguments)}},{key:"complete",value:function(){var i;return this.shapes.length?!1:((i=this.resolvePromise)===null||i===void 0||i.call(this),!0)}},{key:"processShapes",value:function(i,t,l){var r=this,s=i.timeDelta,o=i.currentTime;this.shapes=this.shapes.filter(function(a){return a.updatePosition(s,o),a.draw(r.canvasContext),l?a.getIsVisibleOnCanvas(t):!0})}}]),n}(),Ei=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Te(this,n),this.activeConfettiBatches=[],this.canvas=e.canvas||ki(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return Re(n,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,ni(this.canvas);var i=new Date().getTime(),t=i-this.lastUpdated,l=this.canvas.offsetHeight,r=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(s){return s.processShapes({timeDelta:t,currentTime:i},l,r),r?!s.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(i)}},{key:"queueAnimationFrameIfNeeded",value:function(i){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=i||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ii(i),l=t.confettiRadius,r=t.confettiNumber,s=t.confettiColors,o=t.emojis,a=t.emojiSize,f=this.canvas.getBoundingClientRect(),d=f.width,u=f.height,_=u*5/7,c={x:0,y:_},p={x:d,y:_},g=new Si(this.canvasContext),C=0;C<r/2;C++){var O=new Je({initialPosition:c,direction:"right",confettiRadius:l,confettiColors:s,confettiNumber:r,emojis:o,emojiSize:a,canvasWidth:d}),D=new Je({initialPosition:p,direction:"left",confettiRadius:l,confettiColors:s,confettiNumber:r,emojis:o,emojiSize:a,canvasWidth:d});g.addShapes(O,D)}return this.activeConfettiBatches.push(g),this.queueAnimationFrameIfNeeded(),g.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}}]),n}();function Ze(n,e,i){const t=n.slice();return t[30]=e[i],t}function wi(n){let e,i=n[7].message+"",t,l,r;return{c(){e=P("div"),t=q(i),this.h()},l(s){e=T(s,"DIV",{style:!0,class:!0});var o=R(e);t=B(o,i),o.forEach(h),this.h()},h(){ue(e,"z-index","100"),S(e,"class","absolute left-1/2 -translate-x-1/2 w-60 text-center top-12 bg-slate-300/80 px-4 py-6 backdrop:blur-lg rounded-lg")},m(s,o){w(s,e,o),y(e,t),r=!0},p(s,o){(!r||o[0]&128)&&i!==(i=s[7].message+"")&&re(t,i)},i(s){r||(ye(()=>{r&&(l||(l=Ee(e,ie,{y:-10},!0)),l.run(1))}),r=!0)},o(s){l||(l=Ee(e,ie,{y:-10},!1)),l.run(0),r=!1},d(s){s&&h(e),s&&l&&l.end()}}}function yi(n){let e,i=(n[6].message||"error")+"",t,l,r;return{c(){e=P("div"),t=q(i),this.h()},l(s){e=T(s,"DIV",{style:!0,class:!0});var o=R(e);t=B(o,i),o.forEach(h),this.h()},h(){ue(e,"z-index","100"),S(e,"class","absolute left-1/2 -translate-x-1/2 w-60 text-center top-12 bg-red-300/80 px-4 py-6 backdrop:blur-lg rounded-lg")},m(s,o){w(s,e,o),y(e,t),r=!0},p(s,o){(!r||o[0]&64)&&i!==(i=(s[6].message||"error")+"")&&re(t,i)},i(s){r||(ye(()=>{r&&(l||(l=Ee(e,ie,{y:-10},!0)),l.run(1))}),r=!0)},o(s){l||(l=Ee(e,ie,{y:-10},!1)),l.run(0),r=!1},d(s){s&&h(e),s&&l&&l.end()}}}function Ke(n){let e,i;return e=new Zt({props:{path:n[1].path,title:"Iterations: "+n[5],$$slots:{tabGroup:[ji],ornamentExpand:[Ni,({selectedTab:t})=>({33:t}),({selectedTab:t})=>[0,t?4:0]],ornament:[Ai],default:[Ci]},$$scope:{ctx:n}}}),e.$on("saveSettings",n[10]),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p(t,l){const r={};l[0]&2&&(r.path=t[1].path),l[0]&32&&(r.title="Iterations: "+t[5]),l[0]&16777231|l[1]&4&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function Ci(n){let e;const i=n[13].default,t=_e(i,n,n[24],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r[0]&16777216)&&me(t,i,l,l[24],e?he(i,l[24],r,null):pe(l[24]),null)},i(l){e||(v(t,l),e=!0)},o(l){$(t,l),e=!1},d(l){t&&t.d(l)}}}function Ai(n){let e,i,t,l;function r(a){n[22](a)}function s(a){n[23](a)}let o={};return n[2]!==void 0&&(o.iterateStep=n[2]),n[3]!==void 0&&(o.sliceIndex=n[3]),e=new Dt({props:o}),Z.push(()=>ee(e,"iterateStep",r)),Z.push(()=>ee(e,"sliceIndex",s)),e.$on("iterate",n[11]),e.$on("reset",n[10]),{c(){F(e.$$.fragment)},l(a){z(e.$$.fragment,a)},m(a,f){V(e,a,f),l=!0},p(a,f){const d={};!i&&f[0]&4&&(i=!0,d.iterateStep=a[2],te(()=>i=!1)),!t&&f[0]&8&&(t=!0,d.sliceIndex=a[3],te(()=>t=!1)),e.$set(d)},i(a){l||(v(e.$$.fragment,a),l=!0)},o(a){$(e.$$.fragment,a),l=!1},d(a){L(e,a)}}}function Pi(n){let e,i,t,l,r,s,o,a,f,d,u,_;return e=new Ft({}),t=new qe({props:{title:"Order scale",key:"orderScale",options:["linear","logarithmic"]}}),r=new qe({props:{title:"Density type",key:"densityType",options:["relative","absolute"]}}),u=new H({props:{selected:!0,$$slots:{default:[Di]},$$scope:{ctx:n}}}),u.$on("click",n[21]),{c(){F(e.$$.fragment),i=j(),F(t.$$.fragment),l=j(),F(r.$$.fragment),s=j(),o=P("div"),a=P("p"),f=q("Reset:"),d=j(),F(u.$$.fragment),this.h()},l(c){z(e.$$.fragment,c),i=M(c),z(t.$$.fragment,c),l=M(c),z(r.$$.fragment,c),s=M(c),o=T(c,"DIV",{class:!0});var p=R(o);a=T(p,"P",{});var g=R(a);f=B(g,"Reset:"),g.forEach(h),d=M(p),z(u.$$.fragment,p),p.forEach(h),this.h()},h(){S(o,"class","flex items-center gap-4 mt-2")},m(c,p){V(e,c,p),w(c,i,p),V(t,c,p),w(c,l,p),V(r,c,p),w(c,s,p),w(c,o,p),y(o,a),y(a,f),y(o,d),V(u,o,null),_=!0},p(c,p){const g={};p[0]&16777216&&(g.$$scope={dirty:p,ctx:c}),u.$set(g)},i(c){_||(v(e.$$.fragment,c),v(t.$$.fragment,c),v(r.$$.fragment,c),v(u.$$.fragment,c),_=!0)},o(c){$(e.$$.fragment,c),$(t.$$.fragment,c),$(r.$$.fragment,c),$(u.$$.fragment,c),_=!1},d(c){L(e,c),c&&h(i),L(t,c),c&&h(l),L(r,c),c&&h(s),c&&h(o),L(u)}}}function Ti(n){let e,i,t,l,r,s,o,a;function f(c){n[19](c)}let d={label:"Lattice length",input:n[0].size.toString()};n[0].size!==void 0&&(d.value=n[0].size),i=new ae({props:d}),Z.push(()=>ee(i,"value",f));function u(c){n[20](c)}let _={label:"Agents / species",input:n[0].total_agents.toString()};return n[0].total_agents!==void 0&&(_.value=n[0].total_agents),s=new ae({props:_}),Z.push(()=>ee(s,"value",u)),{c(){e=P("div"),F(i.$$.fragment),l=j(),r=P("div"),F(s.$$.fragment),this.h()},l(c){e=T(c,"DIV",{class:!0});var p=R(e);z(i.$$.fragment,p),l=M(p),r=T(p,"DIV",{class:!0});var g=R(r);z(s.$$.fragment,g),g.forEach(h),p.forEach(h),this.h()},h(){S(r,"class","flex items-center gap-2"),S(e,"class","flex flex-wrap gap-4")},m(c,p){w(c,e,p),V(i,e,null),y(e,l),y(e,r),V(s,r,null),a=!0},p(c,p){const g={};p[0]&1&&(g.input=c[0].size.toString()),!t&&p[0]&1&&(t=!0,g.value=c[0].size,te(()=>t=!1)),i.$set(g);const C={};p[0]&1&&(C.input=c[0].total_agents.toString()),!o&&p[0]&1&&(o=!0,C.value=c[0].total_agents,te(()=>o=!1)),s.$set(C)},i(c){a||(v(i.$$.fragment,c),v(s.$$.fragment,c),a=!0)},o(c){$(i.$$.fragment,c),$(s.$$.fragment,c),a=!1},d(c){c&&h(e),L(i),L(s)}}}function Ri(n){let e,i,t,l,r,s,o,a,f,d,u,_,c;function p(k){n[15](k)}let g={label:"Beta",input:n[0].beta.toExponential()};n[0].beta!==void 0&&(g.value=n[0].beta),i=new ae({props:g}),Z.push(()=>ee(i,"value",p));function C(k){n[16](k)}let O={label:"Gamma",input:n[0].gamma.toString()};n[0].gamma!==void 0&&(O.value=n[0].gamma),r=new ae({props:O}),Z.push(()=>ee(r,"value",C));function D(k){n[17](k)}let A={label:"Lambda",input:n[0].lambda.toString()};n[0].lambda!==void 0&&(A.value=n[0].lambda),a=new ae({props:A}),Z.push(()=>ee(a,"value",D));function U(k){n[18](k)}let G={label:"Seed",input:n[0].seed.toString()};return n[0].seed!==void 0&&(G.value=n[0].seed),u=new ae({props:G}),Z.push(()=>ee(u,"value",U)),{c(){e=P("div"),F(i.$$.fragment),l=j(),F(r.$$.fragment),o=j(),F(a.$$.fragment),d=j(),F(u.$$.fragment),this.h()},l(k){e=T(k,"DIV",{class:!0});var b=R(e);z(i.$$.fragment,b),l=M(b),z(r.$$.fragment,b),o=M(b),z(a.$$.fragment,b),d=M(b),z(u.$$.fragment,b),b.forEach(h),this.h()},h(){S(e,"class","flex flex-wrap gap-4")},m(k,b){w(k,e,b),V(i,e,null),y(e,l),V(r,e,null),y(e,o),V(a,e,null),y(e,d),V(u,e,null),c=!0},p(k,b){const m={};b[0]&1&&(m.input=k[0].beta.toExponential()),!t&&b[0]&1&&(t=!0,m.value=k[0].beta,te(()=>t=!1)),i.$set(m);const E={};b[0]&1&&(E.input=k[0].gamma.toString()),!s&&b[0]&1&&(s=!0,E.value=k[0].gamma,te(()=>s=!1)),r.$set(E);const N={};b[0]&1&&(N.input=k[0].lambda.toString()),!f&&b[0]&1&&(f=!0,N.value=k[0].lambda,te(()=>f=!1)),a.$set(N);const Y={};b[0]&1&&(Y.input=k[0].seed.toString()),!_&&b[0]&1&&(_=!0,Y.value=k[0].seed,te(()=>_=!1)),u.$set(Y)},i(k){c||(v(i.$$.fragment,k),v(r.$$.fragment,k),v(a.$$.fragment,k),v(u.$$.fragment,k),c=!0)},o(k){$(i.$$.fragment,k),$(r.$$.fragment,k),$(a.$$.fragment,k),$(u.$$.fragment,k),c=!1},d(k){k&&h(e),L(i),L(r),L(a),L(u)}}}function Di(n){let e;return{c(){e=q("Reset settings")},l(i){e=B(i,"Reset settings")},m(i,t){w(i,e,t)},d(i){i&&h(e)}}}function Ni(n){let e,i,t,l;const r=[Ri,Ti,Pi],s=[];function o(a,f){return a[33]=="Parameters"?0:a[33]=="Universe"?1:2}return i=o(n),t=s[i]=r[i](n),{c(){e=P("div"),t.c(),this.h()},l(a){e=T(a,"DIV",{slot:!0});var f=R(e);t.l(f),f.forEach(h),this.h()},h(){S(e,"slot","ornamentExpand")},m(a,f){w(a,e,f),s[i].m(e,null),l=!0},p(a,f){let d=i;i=o(a),i===d?s[i].p(a,f):(W(),$(s[d],1,1,()=>{s[d]=null}),X(),t=s[i],t?t.p(a,f):(t=s[i]=r[i](a),t.c()),v(t,1),t.m(e,null))},i(a){l||(v(t),l=!0)},o(a){$(t),l=!1},d(a){a&&h(e),s[i].d()}}}function Qe(n){let e,i;return e=new lt({props:{selected:n[1].path==n[30].url,href:"/vision/"+n[30].url,icon:n[30].icon,tooltip:n[30].name}}),{c(){F(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){V(e,t,l),i=!0},p(t,l){const r={};l[0]&2&&(r.selected=t[1].path==t[30].url),e.$set(r)},i(t){i||(v(e.$$.fragment,t),i=!0)},o(t){$(e.$$.fragment,t),i=!1},d(t){L(e,t)}}}function ji(n){let e,i,t=n[9],l=[];for(let s=0;s<t.length;s+=1)l[s]=Qe(Ze(n,t,s));const r=s=>$(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Se()},l(s){for(let o=0;o<l.length;o+=1)l[o].l(s);e=Se()},m(s,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(s,o);w(s,e,o),i=!0},p(s,o){if(o[0]&514){t=s[9];let a;for(a=0;a<t.length;a+=1){const f=Ze(s,t,a);l[a]?(l[a].p(f,o),v(l[a],1)):(l[a]=Qe(f),l[a].c(),v(l[a],1),l[a].m(e.parentNode,e))}for(W(),a=t.length;a<l.length;a+=1)r(a);X()}},i(s){if(!i){for(let o=0;o<t.length;o+=1)v(l[o]);i=!0}},o(s){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)$(l[o]);i=!1},d(s){nt(l,s),s&&h(e)}}}function Mi(n){let e,i,t,l,r,s,o;const a=[yi,wi],f=[];function d(_,c){return _[6].hasError?0:_[7].loading?1:-1}~(e=d(n))&&(i=f[e]=a[e](n));let u=!n[6].hasError&&Ke(n);return{c(){i&&i.c(),t=j(),l=P("canvas"),r=j(),s=P("div"),u&&u.c(),this.h()},l(_){i&&i.l(_),t=M(_),l=T(_,"CANVAS",{class:!0}),R(l).forEach(h),r=M(_),s=T(_,"DIV",{class:!0});var c=R(s);u&&u.l(c),c.forEach(h),this.h()},h(){S(l,"class","absolute top-0 left-0 h-full w-full bg-red"),S(s,"class","background h-full w-full text-white flex justify-center items-center svelte-1ouzmi9"),x(s,"dark",n[8].darkMode=="dark"),x(s,"auto",n[8].darkMode=="auto")},m(_,c){~e&&f[e].m(_,c),w(_,t,c),w(_,l,c),n[14](l),w(_,r,c),w(_,s,c),u&&u.m(s,null),o=!0},p(_,c){let p=e;e=d(_),e===p?~e&&f[e].p(_,c):(i&&(W(),$(f[p],1,1,()=>{f[p]=null}),X()),~e?(i=f[e],i?i.p(_,c):(i=f[e]=a[e](_),i.c()),v(i,1),i.m(t.parentNode,t)):i=null),_[6].hasError?u&&(W(),$(u,1,1,()=>{u=null}),X()):u?(u.p(_,c),c[0]&64&&v(u,1)):(u=Ke(_),u.c(),v(u,1),u.m(s,null)),(!o||c[0]&256)&&x(s,"dark",_[8].darkMode=="dark"),(!o||c[0]&256)&&x(s,"auto",_[8].darkMode=="auto")},i(_){o||(v(i),v(u),o=!0)},o(_){$(i),$(u),o=!1},d(_){~e&&f[e].d(_),_&&h(t),_&&h(l),n[14](null),_&&h(r),_&&h(s),u&&u.d()}}}function Oi(n,e,i){let t,l,r,s,o;Q(n,le,I=>i(12,l=I)),Q(n,At,I=>i(6,r=I)),Q(n,ke,I=>i(7,s=I)),Q(n,K,I=>i(8,o=I));let{$$slots:a={},$$scope:f}=e,{data:d}=e;const u=Ct.fromObject({lambda:.5,gamma:.5,beta:1.5*1e-5,size:50,iterations:0,total_agents:625e4,seed:123});let _,c,p=1e3,g=0,C=new Ae(u.size,u.total_agents,3,u.seed),O,D=[{name:"2D Slice",icon:It,url:"slice"},{name:"3D view",icon:St,url:"3d"},{name:"Charts",icon:Et,url:"charts"},{name:"Archive",icon:wt,url:"archive"}];$e("layoutData",ne);function A(I){I&&(O=Ae.from_result(I.result,u.size,3,u.seed),ne.outputUniverse.set(O),ne.orderParams.update(Ce=>{const ot=[...I.orderResult].reduce((ut,ft)=>ut+ft,0);return[...Ce,{iter:t,result:ot}]}))}$e("handleResultArray",A);async function U(){le.reset(),i(0,u.iterations=0,u),C.isChanged(u)&&(console.log("universe is changed, creating new universe"),C=new Ae(u.size,u.total_agents,3,u.seed)),await le.init();const I=new Float32Array(C.to_f32_buffer());if(await le.setup(u,I),!Ie(l))return;const Ce=await le.iterate(1);ne.orderParams.set([]),A(Ce)}$e("resetFn",U);async function G(){if(!Ie(l))return;const I=await le.iterate(p);A(I)}function k(){c.addConfetti();var I=new Audio("/trumpets.mp3");I.play()}$e("playConfettti",k),_t(async()=>{K.setup(),await U(),_&&(c=new Ei({canvas:_}))});function b(I){Z[I?"unshift":"push"](()=>{_=I,i(4,_)})}function m(I){n.$$.not_equal(u.beta,I)&&(u.beta=I,i(0,u))}function E(I){n.$$.not_equal(u.gamma,I)&&(u.gamma=I,i(0,u))}function N(I){n.$$.not_equal(u.lambda,I)&&(u.lambda=I,i(0,u))}function Y(I){n.$$.not_equal(u.seed,I)&&(u.seed=I,i(0,u))}function se(I){n.$$.not_equal(u.size,I)&&(u.size=I,i(0,u))}function ge(I){n.$$.not_equal(u.total_agents,I)&&(u.total_agents=I,i(0,u))}const rt=()=>K.reset();function st(I){p=I,i(2,p)}function at(I){g=I,i(3,g)}return n.$$set=I=>{"data"in I&&i(1,d=I.data),"$$scope"in I&&i(24,f=I.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1&&ne.HYPERPARAMS.set(u),n.$$.dirty[0]&8&&ne.sliceIndex.set(g),n.$$.dirty[0]&4&&ne.iterateStep.set(p),n.$$.dirty[0]&4096&&i(5,t=(Ie(l)?l?.hyperparameters?.iterations:0)||0)},[u,d,p,g,_,t,r,s,o,D,U,G,l,a,b,m,E,N,Y,se,ge,rt,st,at,f]}class Wi extends fe{constructor(e){super(),ce(this,e,Oi,Mi,de,{data:1,HYPERPARAMS:0},null,[-1,-1])}get HYPERPARAMS(){return this.$$.ctx[0]}}export{Wi as component,Hi as universal};
