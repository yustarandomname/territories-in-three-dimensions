import{S as ce,i as _e,s as me,e as te,b as D,g as E,v as oe,d as I,f as re,h as $,N as Se,C as we,k as T,q as O,a as q,y as L,l as C,m as R,r as U,c as z,z as M,n as A,p as ge,G as P,A as F,u as X,D as Pe,E as Ee,F as De,R as Ie,T as Ae,U as Te,B,a8 as Fe,O as se,K as Z,M as Be,a9 as He,w as ae,X as le,Y as ne,I as K,_ as ee,aa as ie,H as ue}from"../chunks/index.2ecf17a4.js";import{f as Je,l as fe,n as je}from"../chunks/mdi.5769e54d.js";import{U as Ye}from"../chunks/computeShader3d.ebc538df.js";import{B as Q}from"../chunks/Button.14bf8c2c.js";import{I as pe}from"../chunks/Input.f5150092.js";import{f as Ge,a as Ke,c as Xe,q as Qe,s as Y}from"../chunks/settingStore.5e552471.js";import{g as he,a as We}from"../chunks/gpuStore.3315e7be.js";import{C as Ze}from"../chunks/Canvas.1312a6b0.js";function $e(a){let t,e,s,l,n,i,f,o,g,b,m;i=new Q({props:{icon:Je}}),i.$on("click",a[5]);const v=a[4].default,p=we(v,a,a[3],null);return{c(){t=T("div"),e=T("div"),s=T("h2"),l=O(a[1]),n=q(),L(i.$$.fragment),f=q(),o=T("div"),p&&p.c(),this.h()},l(c){t=C(c,"DIV",{style:!0,class:!0});var _=R(t);e=C(_,"DIV",{class:!0});var y=R(e);s=C(y,"H2",{class:!0});var u=R(s);l=U(u,a[1]),u.forEach($),n=z(y),M(i.$$.fragment,y),y.forEach($),f=z(_),o=C(_,"DIV",{class:!0});var r=R(o);p&&p.l(r),r.forEach($),_.forEach($),this.h()},h(){A(s,"class","text-lg"),A(e,"class","flex justify-between items-center"),A(o,"class","mt-4"),ge(t,"min-width","20rem"),ge(t,"min-height","20rem"),A(t,"class","absolute bg-gray-600/80 backdrop-blur-3xl rounded-xl top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 p-4")},m(c,_){D(c,t,_),P(t,e),P(e,s),P(s,l),P(e,n),F(i,e,null),P(t,f),P(t,o),p&&p.m(o,null),m=!0},p(c,_){(!m||_&2)&&X(l,c[1]),p&&p.p&&(!m||_&8)&&Pe(p,v,c,c[3],m?De(v,c[3],_,null):Ee(c[3]),null)},i(c){m||(E(i.$$.fragment,c),E(p,c),Ie(()=>{m&&(b&&b.end(1),g=Ae(t,Ge,{y:20,duration:200}),g.start())}),m=!0)},o(c){I(i.$$.fragment,c),I(p,c),g&&g.invalidate(),b=Te(t,Ke,{duration:200}),m=!1},d(c){c&&$(t),B(i),p&&p.d(c),c&&b&&b.end()}}}function xe(a){let t,e,s=a[0]&&$e(a);return{c(){s&&s.c(),t=te()},l(l){s&&s.l(l),t=te()},m(l,n){s&&s.m(l,n),D(l,t,n),e=!0},p(l,[n]){l[0]?s?(s.p(l,n),n&1&&E(s,1)):(s=$e(l),s.c(),E(s,1),s.m(t.parentNode,t)):s&&(oe(),I(s,1,1,()=>{s=null}),re())},i(l){e||(E(s),e=!0)},o(l){I(s),e=!1},d(l){s&&s.d(l),l&&$(t)}}}function et(a,t,e){let{$$slots:s={},$$scope:l}=t,{title:n=""}=t,{open:i=!1}=t;const f=Se(),o=()=>{e(0,i=!1),f("close")};return a.$$set=g=>{"title"in g&&e(1,n=g.title),"open"in g&&e(0,i=g.open),"$$scope"in g&&e(3,l=g.$$scope)},[i,n,f,l,s,o]}class tt extends ce{constructor(t){super(),_e(this,t,et,xe,me,{title:1,open:0})}}function be(a,t,e){const s=a.slice();return s[15]=t[e],s[17]=e,s}const st=a=>({item:a&1,index:a&1}),ve=a=>({item:a[15],index:a[17]});function ke(a){let t,e=[],s=new Map,l,n=a[0];const i=f=>f[8](f[15]);for(let f=0;f<n.length;f+=1){let o=be(a,n,f),g=i(o);s.set(g,e[f]=ye(g,o))}return{c(){t=T("ul");for(let f=0;f<e.length;f+=1)e[f].c();this.h()},l(f){t=C(f,"UL",{class:!0});var o=R(t);for(let g=0;g<e.length;g+=1)e[g].l(o);o.forEach($),this.h()},h(){A(t,"class","svelte-1xt2noz")},m(f,o){D(f,t,o);for(let g=0;g<e.length;g+=1)e[g]&&e[g].m(t,null);l=!0},p(f,o){o&1523&&(n=f[0],oe(),e=Fe(e,o,i,1,f,n,s,t,He,ye,null,be),re())},i(f){if(!l){for(let o=0;o<n.length;o+=1)E(e[o]);l=!0}},o(f){for(let o=0;o<e.length;o+=1)I(e[o]);l=!1},d(f){f&&$(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function at(a){let t,e=a[8](a[15])+"",s;return{c(){t=T("p"),s=O(e)},l(l){t=C(l,"P",{});var n=R(t);s=U(n,e),n.forEach($)},m(l,n){D(l,t,n),P(t,s)},p(l,n){n&1&&e!==(e=l[8](l[15])+"")&&X(s,e)},d(l){l&&$(t)}}}function ye(a,t){let e,s,l,n,i,f,o,g,b;const m=t[11].default,v=we(m,t,t[10],ve),p=v||at(t);return{key:a,first:null,c(){e=T("li"),p&&p.c(),s=q(),this.h()},l(c){e=C(c,"LI",{"data-index":!0,"data-id":!0,draggable:!0,class:!0});var _=R(e);p&&p.l(_),s=z(_),_.forEach($),this.h()},h(){A(e,"data-index",l=t[17]),A(e,"data-id",n=JSON.stringify(t[8](t[15]))),A(e,"draggable","true"),A(e,"class","svelte-1xt2noz"),se(e,"over",t[8](t[15])===t[1]),this.first=e},m(c,_){D(c,e,_),p&&p.m(e,null),P(e,s),o=!0,g||(b=[Z(e,"dragstart",t[4]),Z(e,"dragover",t[5]),Z(e,"dragleave",t[6]),Z(e,"drop",t[7])],g=!0)},p(c,_){t=c,v?v.p&&(!o||_&1025)&&Pe(v,m,t,t[10],o?De(m,t[10],_,st):Ee(t[10]),ve):p&&p.p&&(!o||_&1)&&p.p(t,o?_:-1),(!o||_&1&&l!==(l=t[17]))&&A(e,"data-index",l),(!o||_&1&&n!==(n=JSON.stringify(t[8](t[15]))))&&A(e,"data-id",n),(!o||_&259)&&se(e,"over",t[8](t[15])===t[1])},i(c){o||(E(p,c),c&&Ie(()=>{o&&(f&&f.end(1),i=Ae(e,t[3],{key:t[8](t[15])}),i.start())}),o=!0)},o(c){I(p,c),i&&i.invalidate(),c&&(f=Te(e,t[2],{key:t[8](t[15])})),o=!1},d(c){c&&$(e),p&&p.d(c),c&&f&&f.end(),g=!1,Be(b)}}}function lt(a){let t,e,s=a[0]&&a[0].length&&ke(a);return{c(){s&&s.c(),t=te()},l(l){s&&s.l(l),t=te()},m(l,n){s&&s.m(l,n),D(l,t,n),e=!0},p(l,[n]){l[0]&&l[0].length?s?(s.p(l,n),n&1&&E(s,1)):(s=ke(l),s.c(),E(s,1),s.m(t.parentNode,t)):s&&(oe(),I(s,1,1,()=>{s=null}),re())},i(l){e||(E(s),e=!0)},o(l){I(s),e=!1},d(l){s&&s.d(l),l&&$(t)}}}function nt(a,t,e){let{$$slots:s={},$$scope:l}=t;const[n,i]=Xe({duration:r=>Math.sqrt(r*200),fallback(r,S){const k=getComputedStyle(r),V=k.transform==="none"?"":k.transform;return{duration:600,easing:Qe,css:H=>`
					transform: ${V} scale(${H});
					opacity: ${H}
				`}}});let f=!1;const o=r=>r.dataset.index&&r.dataset||o(r?.parentNode),g=r=>{r.dataTransfer?.setData("source",r.target.dataset.index)},b=r=>{r.preventDefault();let S=o(r.target);f!==S.id&&e(1,f=JSON.parse(S.id))},m=r=>{let S=o(r.target);f===S.id&&e(1,f=!1)},v=r=>{e(1,f=!1),r.preventDefault();let S=o(r.target),k=parseInt(r.dataTransfer?.getData("source")||""),V=S.index;k&&V&&c({from:k,to:V})},p=Se(),c=({from:r,to:S})=>{let k=[...y];k[r]=[k[S],k[S]=k[r]][0],p("sort",k)},_=r=>u?r[u]:r;let{list:y=[]}=t,{key:u}=t;return a.$$set=r=>{"list"in r&&e(0,y=r.list),"key"in r&&e(9,u=r.key),"$$scope"in r&&e(10,l=r.$$scope)},[y,f,n,i,g,b,m,v,_,u,l,s]}class ot extends ce{constructor(t){super(),_e(this,t,nt,lt,me,{list:0,key:9})}}function rt(a){let t,e,s,l,n,i,f,o,g,b;return{c(){t=T("div"),e=T("p"),s=O("Steps: "),l=O(a[5]),n=O(" / "),i=O(a[6]),f=q(),o=T("p"),g=O("Time remaining: "),b=O(a[3]),this.h()},l(m){t=C(m,"DIV",{class:!0});var v=R(t);e=C(v,"P",{});var p=R(e);s=U(p,"Steps: "),l=U(p,a[5]),n=U(p," / "),i=U(p,a[6]),p.forEach($),f=z(v),o=C(v,"P",{});var c=R(o);g=U(c,"Time remaining: "),b=U(c,a[3]),c.forEach($),v.forEach($),this.h()},h(){A(t,"class","absolute bottom-12 right-2 p-4 rounded-lg bg-slate-600")},m(m,v){D(m,t,v),P(t,e),P(e,s),P(e,l),P(e,n),P(e,i),P(t,f),P(t,o),P(o,g),P(o,b)},p(m,v){v[0]&32&&X(l,m[5]),v[0]&64&&X(i,m[6]),v[0]&8&&X(b,m[3])},d(m){m&&$(t)}}}function it(a){let t,e,s;return{c(){t=T("div"),e=O("Time taken to iterate: "),s=O(a[4]),this.h()},l(l){t=C(l,"DIV",{class:!0});var n=R(t);e=U(n,"Time taken to iterate: "),s=U(n,a[4]),n.forEach($),this.h()},h(){A(t,"class","absolute bottom-12 right-2 p-4 rounded-lg bg-slate-600")},m(l,n){D(l,t,n),P(t,e),P(t,s)},p(l,n){n[0]&16&&X(s,l[4])},d(l){l&&$(t)}}}function ut(a){let t,e;return t=new Ze({props:{id:"sliceCanvas",universe:a[8],offset:a[9]*(a[7].size*a[7].size)}}),{c(){L(t.$$.fragment)},l(s){M(t.$$.fragment,s)},m(s,l){F(t,s,l),e=!0},p(s,l){const n={};l[0]&256&&(n.universe=s[8]),l[0]&640&&(n.offset=s[9]*(s[7].size*s[7].size)),t.$set(n)},i(s){e||(E(t.$$.fragment,s),e=!0)},o(s){I(t.$$.fragment,s),e=!1},d(s){B(t,s)}}}function ft(a){let t;return{c(){t=T("div"),this.h()},l(e){t=C(e,"DIV",{class:!0}),R(t).forEach($),this.h()},h(){A(t,"class","h-[640px] w-[640px] bg-purple-900/60")},m(e,s){D(e,t,s)},p:ue,i:ue,o:ue,d(e){e&&$(t)}}}function pt(a){let t;return{c(){t=O("Download image")},l(e){t=U(e,"Download image")},m(e,s){D(e,t,s)},d(e){e&&$(t)}}}function ct(a){let t,e,s,l,n,i,f,o,g;function b(_){a[21](_,a[35])}let m={label:"steps",input:a[34].steps.toString()};a[0].autoPlaySteps[a[35]].steps!==void 0&&(m.value=a[0].autoPlaySteps[a[35]].steps),e=new pe({props:m}),ae.push(()=>le(e,"value",b));function v(_){a[22](_,a[35])}let p={label:"times",input:a[34].amount.toString()};a[0].autoPlaySteps[a[35]].amount!==void 0&&(p.value=a[0].autoPlaySteps[a[35]].amount),n=new pe({props:p}),ae.push(()=>le(n,"value",v));function c(){return a[23](a[34])}return o=new Q({props:{icon:je}}),o.$on("click",c),{c(){t=T("div"),L(e.$$.fragment),l=q(),L(n.$$.fragment),f=q(),L(o.$$.fragment),this.h()},l(_){t=C(_,"DIV",{class:!0});var y=R(t);M(e.$$.fragment,y),l=z(y),M(n.$$.fragment,y),f=z(y),M(o.$$.fragment,y),y.forEach($),this.h()},h(){A(t,"class","w-full flex items-center justify-between gap-2")},m(_,y){D(_,t,y),F(e,t,null),P(t,l),F(n,t,null),P(t,f),F(o,t,null),g=!0},p(_,y){a=_;const u={};y[1]&8&&(u.input=a[34].steps.toString()),!s&&y[0]&1|y[1]&16&&(s=!0,u.value=a[0].autoPlaySteps[a[35]].steps,ne(()=>s=!1)),e.$set(u);const r={};y[1]&8&&(r.input=a[34].amount.toString()),!i&&y[0]&1|y[1]&16&&(i=!0,r.value=a[0].autoPlaySteps[a[35]].amount,ne(()=>i=!1)),n.$set(r)},i(_){g||(E(e.$$.fragment,_),E(n.$$.fragment,_),E(o.$$.fragment,_),g=!0)},o(_){I(e.$$.fragment,_),I(n.$$.fragment,_),I(o.$$.fragment,_),g=!1},d(_){_&&$(t),B(e),B(n),B(o)}}}function _t(a){let t;return{c(){t=O("Reset and play all")},l(e){t=U(e,"Reset and play all")},m(e,s){D(e,t,s)},d(e){e&&$(t)}}}function mt(a){let t;return{c(){t=O("Play all")},l(e){t=U(e,"Play all")},m(e,s){D(e,t,s)},d(e){e&&$(t)}}}function dt(a){let t,e,s,l,n,i,f,o,g,b,m,v,p,c;e=new ot({props:{list:a[0].autoPlaySteps,key:"id",$$slots:{default:[ct,({item:u,index:r})=>({34:u,35:r}),({item:u,index:r})=>[0,(u?8:0)|(r?16:0)]]},$$scope:{ctx:a}}}),e.$on("sort",a[24]);function _(u){a[25](u)}let y={label:"Add step",input:a[2].toString()};return a[2]!==void 0&&(y.value=a[2]),n=new pe({props:y}),ae.push(()=>le(n,"value",_)),o=new Q({props:{selected:!0,icon:fe}}),o.$on("click",a[16]),m=new Q({props:{selected:!0,icon:fe,$$slots:{default:[_t]},$$scope:{ctx:a}}}),m.$on("click",a[19]),p=new Q({props:{icon:fe,$$slots:{default:[mt]},$$scope:{ctx:a}}}),p.$on("click",a[18]),{c(){t=T("ol"),L(e.$$.fragment),s=q(),l=T("div"),L(n.$$.fragment),f=q(),L(o.$$.fragment),g=q(),b=T("div"),L(m.$$.fragment),v=q(),L(p.$$.fragment),this.h()},l(u){t=C(u,"OL",{class:!0});var r=R(t);M(e.$$.fragment,r),r.forEach($),s=z(u),l=C(u,"DIV",{class:!0});var S=R(l);M(n.$$.fragment,S),f=z(S),M(o.$$.fragment,S),S.forEach($),g=z(u),b=C(u,"DIV",{class:!0});var k=R(b);M(m.$$.fragment,k),v=z(k),M(p.$$.fragment,k),k.forEach($),this.h()},h(){A(t,"class","sortableList"),A(l,"class","w-full flex justify-end mt-2 items-center gap-4 whitespace-nowrap"),A(b,"class","flex gap-4")},m(u,r){D(u,t,r),F(e,t,null),D(u,s,r),D(u,l,r),F(n,l,null),P(l,f),F(o,l,null),D(u,g,r),D(u,b,r),F(m,b,null),P(b,v),F(p,b,null),c=!0},p(u,r){const S={};r[0]&1&&(S.list=u[0].autoPlaySteps),r[0]&1|r[1]&56&&(S.$$scope={dirty:r,ctx:u}),e.$set(S);const k={};r[0]&4&&(k.input=u[2].toString()),!i&&r[0]&4&&(i=!0,k.value=u[2],ne(()=>i=!1)),n.$set(k);const V={};r[1]&32&&(V.$$scope={dirty:r,ctx:u}),m.$set(V);const H={};r[1]&32&&(H.$$scope={dirty:r,ctx:u}),p.$set(H)},i(u){c||(E(e.$$.fragment,u),E(n.$$.fragment,u),E(o.$$.fragment,u),E(m.$$.fragment,u),E(p.$$.fragment,u),c=!0)},o(u){I(e.$$.fragment,u),I(n.$$.fragment,u),I(o.$$.fragment,u),I(m.$$.fragment,u),I(p.$$.fragment,u),c=!1},d(u){u&&$(t),B(e),u&&$(s),u&&$(l),B(n),B(o),u&&$(g),u&&$(b),B(m),B(p)}}}function gt(a){let t,e,s,l,n,i,f,o,g,b,m,v,p,c,_;function y(d,w){if(d[4])return it;if(d[3])return rt}let u=y(a),r=u&&u(a);const S=[ft,ut],k=[];function V(d,w){return d[8]?1:0}e=V(a),s=k[e]=S[e](a),i=new Q({props:{selected:!0,$$slots:{default:[pt]},$$scope:{ctx:a}}}),i.$on("click",a[17]);function H(d){a[26](d)}let J={title:"Autoplay | total steps: "+a[6],$$slots:{default:[dt]},$$scope:{ctx:a}};return a[1]!==void 0&&(J.open=a[1]),m=new tt({props:J}),ae.push(()=>le(m,"open",H)),{c(){r&&r.c(),t=q(),s.c(),l=q(),n=T("div"),L(i.$$.fragment),f=q(),o=T("button"),g=O("Autoplay"),b=q(),L(m.$$.fragment),this.h()},l(d){r&&r.l(d),t=z(d),s.l(d),l=z(d),n=C(d,"DIV",{class:!0});var w=R(n);M(i.$$.fragment,w),f=z(w),o=C(w,"BUTTON",{class:!0});var j=R(o);g=U(j,"Autoplay"),j.forEach($),w.forEach($),b=z(d),M(m.$$.fragment,d),this.h()},h(){A(o,"class","rounded-full py-2 px-3 hover:bg-gray-300/70 hover:scale-105 bg-gray-400/50 transition-all backdrop-blur-lg"),se(o,"selected",a[1]),A(n,"class","absolute top-2 right-2 m-4 flex gap-4")},m(d,w){r&&r.m(d,w),D(d,t,w),k[e].m(d,w),D(d,l,w),D(d,n,w),F(i,n,null),P(n,f),P(n,o),P(o,g),D(d,b,w),F(m,d,w),p=!0,c||(_=Z(o,"click",a[20]),c=!0)},p(d,w){u===(u=y(d))&&r?r.p(d,w):(r&&r.d(1),r=u&&u(d),r&&(r.c(),r.m(t.parentNode,t)));let j=e;e=V(d),e===j?k[e].p(d,w):(oe(),I(k[j],1,1,()=>{k[j]=null}),re(),s=k[e],s?s.p(d,w):(s=k[e]=S[e](d),s.c()),E(s,1),s.m(l.parentNode,l));const x={};w[1]&32&&(x.$$scope={dirty:w,ctx:d}),i.$set(x),(!p||w[0]&2)&&se(o,"selected",d[1]);const G={};w[0]&64&&(G.title="Autoplay | total steps: "+d[6]),w[0]&5|w[1]&32&&(G.$$scope={dirty:w,ctx:d}),!v&&w[0]&2&&(v=!0,G.open=d[1],ne(()=>v=!1)),m.$set(G)},i(d){p||(E(s),E(i.$$.fragment,d),E(m.$$.fragment,d),p=!0)},o(d){I(s),I(i.$$.fragment,d),I(m.$$.fragment,d),p=!1},d(d){r&&r.d(d),d&&$(t),k[e].d(d),d&&$(l),d&&$(n),B(i),d&&$(b),B(m,d),c=!1,_()}}}function ht(a,t,e){let s,l,n,i,f,o,g,b;K(a,Y,h=>e(0,i=h)),K(a,he,h=>e(29,o=h));const{outputUniverse:m,HYPERPARAMS:v,sliceIndex:p,iterateStep:c,orderParams:_}=ee("layoutData");K(a,m,h=>e(8,g=h)),K(a,v,h=>e(7,n=h)),K(a,p,h=>e(9,b=h)),K(a,c,h=>e(28,f=h)),K(a,_,h=>e(27,l=h));const y=ee("resetFn"),u=ee("playConfettti"),r=ee("handleResultArray");let S=!1,k=1e4,V,H,J=0;async function d(){if(!We(o))return;const h=await he.iterate(f);h&&(m.set(Ye.from_result(h.result,n.size,3,n.seed)),r(h))}function w(h){ie(Y,i.autoPlaySteps=i.autoPlaySteps.filter(N=>N.id!==h),i)}function j(){ie(Y,i.autoPlaySteps=[...i.autoPlaySteps,{id:Math.random().toString(),steps:k,amount:1}],i)}function x(){const h=document.querySelector("#sliceCanvas canvas");if(!h)return;let N=h.toDataURL("image/webp",.5);const W=document.createElement("a");W.href=N;const de=JSON.stringify(n);W.download=de+"-image.webp",W.click(),W.remove()}async function G(){e(1,S=!1),e(4,H=void 0);const h=performance.now();Y.set("autoPlaySteps",i.autoPlaySteps),e(5,J=0);for(let N of i.autoPlaySteps){Y.set("autoPlaySteps",i.autoPlaySteps),c.set(N.steps);for(let W of new Array(N.amount).fill(0)){await d(),e(5,J+=N.steps);const Le=performance.now()-h,Me=(s-J)/J*Le;e(3,V=new Intl.DateTimeFormat("en",{minute:"2-digit",second:"2-digit"}).format(Me))}}e(3,V=void 0),e(4,H=new Intl.DateTimeFormat("en",{minute:"2-digit",second:"2-digit"}).format(performance.now()-h)),console.log(performance.now()-h),u(),console.log(`final orderparam for beta = ${n.beta.toExponential()} and seed = ${n.seed} and total agents = ${n.total_agents} is`,l.at(-1)),navigator.clipboard.writeText(`{"beta": ${n.beta.toExponential()},"order_param":${l.at(-1)?.result}},`)}async function Ce(){await y(),await G()}const Re=()=>e(1,S=!S);function Ne(h,N){a.$$.not_equal(i.autoPlaySteps[N].steps,h)&&(i.autoPlaySteps[N].steps=h,Y.set(i))}function Ve(h,N){a.$$.not_equal(i.autoPlaySteps[N].amount,h)&&(i.autoPlaySteps[N].amount=h,Y.set(i))}const Oe=h=>w(h.id),Ue=h=>ie(Y,i.autoPlaySteps=h.detail,i);function qe(h){k=h,e(2,k)}function ze(h){S=h,e(1,S)}return a.$$.update=()=>{a.$$.dirty[0]&1&&e(6,s=i.autoPlaySteps.reduce((h,N)=>h+N.steps*N.amount,0))},[i,S,k,V,H,J,s,n,g,b,m,v,p,c,_,w,j,x,G,Ce,Re,Ne,Ve,Oe,Ue,qe,ze]}class Et extends ce{constructor(t){super(),_e(this,t,ht,gt,me,{},null,[-1,-1])}}export{Et as component};
